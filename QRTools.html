<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Professional QR Code Tool</title>
  <script src="jsQR.min.js"></script>
  <script src="qrcode.min.js"></script>
  <style>
    :root {
      --primary: #2c3e50;
      --secondary: #3498db;
      --accent: #e74c3c;
      --light: #ecf0f1;
      --dark: #2c3e50;
      --success: #2ecc71;
      --warning: #f39c12;
      --shadow: rgba(0, 0, 0, 0.1);
      --card-bg: #ffffff;
      --text-primary: #2c3e50;
      --text-secondary: #7f8c8d;
    }
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
    body{background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);color:var(--text-primary);line-height:1.6;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px}
    .container{max-width:1200px;width:100%;display:flex;flex-direction:column;align-items:center}
    header{text-align:center;margin-bottom:30px;padding:20px 0;width:100%}
    h1{color:var(--primary);font-weight:700;margin-bottom:10px;font-size:2.5rem}
    .subtitle{color:var(--text-secondary);font-size:1.2rem;margin-bottom:30px}
    .tabs{display:flex;justify-content:center;margin-bottom:30px;border-bottom:1px solid var(--shadow);width:100%}
    .tab-button{padding:15px 30px;background:none;border:none;cursor:pointer;font-size:1.1rem;font-weight:600;color:var(--text-secondary);position:relative;transition:all .3s ease}
    .tab-button.active{color:var(--secondary)}
    .tab-button.active::after{content:'';position:absolute;bottom:-1px;left:0;width:100%;height:3px;background:var(--secondary);border-radius:3px 3px 0 0}
    .tab-content{display:none;width:100%}
    .tab-content.active{display:flex;flex-direction:column;align-items:center;animation:fadeIn .5s ease}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    .card{background:var(--card-bg);border-radius:12px;box-shadow:0 10px 30px var(--shadow);overflow:hidden;margin-bottom:30px;width:100%;max-width:800px}
    .card-header{background:var(--primary);color:white;padding:20px;font-weight:600;font-size:1.2rem;display:flex;align-items:center;gap:12px}
    .card-body{padding:30px}
    .scanner-container{display:flex;flex-direction:column;gap:30px;width:100%;align-items:center}
    @media (min-width:992px){.scanner-container{flex-direction:row;justify-content:center}.card{width:48%}}
    #video-container{width:100%;position:relative;background-color:black;border-radius:8px;overflow:hidden;text-align:center;padding:10px;transition:all .3s ease}
    #video{width:100%;display:block;background:#000;border-radius:8px}
    #scan-region{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;border:2px solid var(--secondary);border-radius:8px;box-shadow:0 0 0 4000px rgba(0,0,0,0.3)}
    #scan-line{position:absolute;height:2px;width:100%;background:var(--secondary);top:0;animation:scan 2s infinite linear}
    @keyframes scan{0%{top:0}50%{top:calc(100% - 2px)}100%{top:0}}
    .scanner-controls{display:flex;justify-content:center;gap:15px;margin-top:20px}
    button{padding:14px 28px;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;display:flex;align-items:center;gap:10px;font-size:1rem}
    .btn-primary{background:var(--secondary);color:white;box-shadow:0 4px 6px rgba(52,152,219,0.2)}
    .btn-primary:hover{background:#2980b9;transform:translateY(-2px);box-shadow:0 6px 8px rgba(52,152,219,0.3)}
    .btn-secondary{background:#95a5a6;color:white;box-shadow:0 4px 6px rgba(149,165,166,0.2)}
    .btn-secondary:hover{background:#7f8c8d;transform:translateY(-2px)}
    .btn-success{background:var(--success);color:white;box-shadow:0 4px 6px rgba(46,204,113,0.2)}
    .btn-success:hover{background:#27ae60;transform:translateY(-2px)}
    .result-content{display:flex;flex-direction:column;height:100%}
    .result-placeholder{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#bdc3c7;text-align:center;padding:40px 20px}
    .result-placeholder i{font-size:60px;margin-bottom:20px}
    #result{display:none;flex:1}
    .result-success{color:var(--success);margin-bottom:20px;display:flex;align-items:center;gap:12px;font-size:1.2rem}
    .result-data{background:#f8f9fa;border-radius:8px;padding:20px;margin:20px 0;word-break:break-all;border-left:4px solid var(--secondary);font-family:monospace;font-size:1.1rem}
    .result-actions{display:flex;gap:15px;margin-top:25px;flex-wrap:wrap;justify-content:center}
    .btn-small{padding:12px 20px;font-size:.95rem}
    .generator-form{margin-bottom:25px;width:100%}
    .form-group{margin-bottom:20px;width:100%}
    label{display:block;margin-bottom:8px;font-weight:600;color:var(--text-primary)}
    textarea,input[type="text"],input[type="url"]{width:100%;padding:15px;border:1px solid #ddd;border-radius:8px;font-size:1rem;transition:border .3s ease}
    textarea:focus,input[type="text"]:focus,input[type="url"]:focus{outline:none;border-color:var(--secondary);box-shadow:0 0 0 3px rgba(52,152,219,0.1)}
    textarea{min-height:120px;resize:vertical}
    .qr-preview{display:flex;flex-direction:column;align-items:center;margin-top:30px;width:100%}
    #qrcode{width:200px;height:200px;background:white;padding:15px;border-radius:8px;box-shadow:0 4px 10px var(--shadow);margin-bottom:20px;display:flex;justify-content:center;align-items:center}
    .download-btn{margin-top:20px}
    .loading{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0.8);display:flex;justify-content:center;align-items:center;z-index:10;display:none;border-radius:8px}
    .spinner{width:50px;height:50px;border:5px solid #f3f3f3;border-top:5px solid var(--secondary);border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    .error-message{color:var(--accent);text-align:center;padding:15px;background:#ffebee;border-radius:8px;margin:15px 0;display:none}
    footer{text-align:center;margin-top:40px;color:var(--text-secondary);font-size:1rem;padding:20px 0;width:100%}
    .icon{font-size:1.5rem}
    .generator-container{display:flex;flex-direction:column;align-items:center;width:100%;max-width:800px}
    @media (min-width:992px){.generator-container{flex-direction:row;align-items:flex-start;gap:30px}}
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1>QR Code Professional</h1>
    <p class="subtitle">Scan and generate QR codes with ease</p>
  </header>

  <div class="tabs">
    <button class="tab-button active" data-tab="scanner"><span class="icon">üì∑</span> Scanner</button>
    <button class="tab-button" data-tab="generator"><span class="icon">‚öôÔ∏è</span> Generator</button>
  </div>

  <div class="tab-content active" id="scanner-tab">
    <div class="scanner-container">
      <div class="card">
        <div class="card-header"><span class="icon">üì∑</span><span>QR Code Scanner</span></div>
        <div class="card-body">
          <div class="loading"><div class="spinner"></div></div>
          <div id="video-container">
            <video id="video" playsinline></video>
            <div id="scan-region"><div id="scan-line"></div></div>
            <p style="color:#ccc;margin-top:8px">üìÇ Drag & Drop an image with QR code here</p>
          </div>
          <div class="error-message" id="error-message"></div>
          <div class="scanner-controls">
            <button id="start-button" class="btn-primary"><span class="icon">‚ñ∂</span> Start Scanner</button>
            <button id="stop-button" class="btn-secondary" disabled><span class="icon">‚èπ</span> Stop Scanner</button>
            <input type="file" id="file-input" accept="image/*" style="display:none">
            <button id="upload-button" class="btn-success"><span class="icon">üìÇ</span> Upload Image</button>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header"><span class="icon">üìã</span><span>Scan Results</span></div>
        <div class="card-body">
          <div class="result-content">
            <div class="result-placeholder" id="result-placeholder">
              <span class="icon">üîç</span>
              <h3>No QR code scanned yet</h3>
              <p>Start scanner, upload, or drag & drop an image with QR code</p>
            </div>
            <div id="result">
              <div class="result-success"><span class="icon">‚úÖ</span><h3>QR Code Scanned Successfully!</h3></div>
              <p>Content:</p>
              <div class="result-data" id="result-data"></div>
              <div class="result-actions">
                <button id="copy-button" class="btn-success btn-small" disabled><span class="icon">üìã</span> Copy</button>
                <button id="open-button" class="btn-primary btn-small" disabled><span class="icon">üåê</span> Open URL</button>
                <button id="clear-result-button" class="btn-secondary btn-small"><span class="icon">üóëÔ∏è</span> Clear</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-content" id="generator-tab">
    <div class="generator-container">
      <div class="card">
        <div class="card-header"><span class="icon">‚öôÔ∏è</span><span>QR Code Generator</span></div>
        <div class="card-body">
          <div class="generator-form">
            <div class="form-group">
              <label for="qr-content">Enter text or URL:</label>
              <textarea id="qr-content" placeholder="Enter text or URL here...">https://example.com</textarea>
            </div>
            <button id="generate-button" class="btn-primary"><span class="icon">üîÑ</span> Generate</button>
          </div>
          <div class="qr-preview">
            <div id="qrcode"></div>
            <button id="download-button" class="btn-success download-btn" disabled><span class="icon">üì•</span> Download</button>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header"><span class="icon">üí°</span><span>Generator Tips</span></div>
        <div class="card-body">
          <h3>Best practices:</h3>
          <ul style="padding-left:20px;margin-top:15px;">
            <li>Use high contrast colors</li><li>Test with multiple devices</li><li>Use HTTPS for URLs</li><li>Keep content short</li><li>Add call-to-action nearby</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <footer><p>Professional QR Code Tool &copy; 2023 | All rights reserved</p></footer>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const tabButtons=document.querySelectorAll('.tab-button');
  const tabContents=document.querySelectorAll('.tab-content');
  tabButtons.forEach(button=>{
    button.addEventListener('click',()=>{
      const tabId=button.getAttribute('data-tab');
      tabButtons.forEach(btn=>btn.classList.remove('active'));
      button.classList.add('active');
      tabContents.forEach(content=>content.classList.remove('active'));
      document.getElementById(`${tabId}-tab`).classList.add('active');
      if(tabId==='scanner'&&window.scannerActive){setTimeout(()=>{startScanner();},300);}
      else if(tabId!=='scanner'){stopScanner();}
    });
  });

  const video=document.getElementById('video');
  const startButton=document.getElementById('start-button');
  const stopButton=document.getElementById('stop-button');
  const copyButton=document.getElementById('copy-button');
  const openButton=document.getElementById('open-button');
  const clearResultButton=document.getElementById('clear-result-button');
  const resultPlaceholder=document.getElementById('result-placeholder');
  const resultDiv=document.getElementById('result');
  const resultData=document.getElementById('result-data');
  const errorMessage=document.getElementById('error-message');
  const loading=document.querySelector('.loading');
  const fileInput=document.getElementById('file-input');
  const uploadButton=document.getElementById('upload-button');
  const qrContent=document.getElementById('qr-content');
  const generateButton=document.getElementById('generate-button');
  const downloadButton=document.getElementById('download-button');
  const qrcodeDiv=document.getElementById('qrcode');

  let stream=null,scanning=false,lastResult='',qrCode=null;

  if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){showError("Your browser doesn't support camera.");startButton.disabled=true;}

  startButton.addEventListener('click',()=>startScanner());
  stopButton.addEventListener('click',()=>stopScanner());
  copyButton.addEventListener('click',()=>{if(!lastResult)return;navigator.clipboard.writeText(lastResult).then(()=>alert("Copied to clipboard!")).catch(()=>alert("Copy failed"));});
  openButton.addEventListener('click',()=>{if(!lastResult)return;try{const url=new URL(lastResult);window.open(url.href,'_blank');}catch{alert("This is not a valid URL.");}});
  clearResultButton.addEventListener('click',()=>{lastResult='';resultDiv.style.display='none';resultPlaceholder.style.display='flex';copyButton.disabled=true;openButton.disabled=true;});
  generateButton.addEventListener('click',()=>generateQRCode());
  downloadButton.addEventListener('click',()=>{if(qrCode){const link=document.createElement('a');link.download='qrcode.png';link.href=qrCode;link.click();}});
  uploadButton.addEventListener('click',()=>fileInput.click());
  fileInput.addEventListener('change',e=>{if(e.target.files.length>0)handleFile(e.target.files[0]);});

  const dropArea=document.getElementById('video-container');
  ['dragenter','dragover'].forEach(eventName=>{dropArea.addEventListener(eventName,e=>{e.preventDefault();dropArea.style.outline='3px dashed var(--secondary)';},false);});
  ['dragleave','drop'].forEach(eventName=>{dropArea.addEventListener(eventName,e=>{e.preventDefault();dropArea.style.outline='none';},false);});
  dropArea.addEventListener('drop',e=>{if(e.dataTransfer.files.length>0)handleFile(e.dataTransfer.files[0]);});

  function startScanner(){
    loading.style.display='flex';errorMessage.style.display='none';
    navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(s=>{
      stream=s;video.srcObject=stream;video.setAttribute('playsinline',true);
      video.onloadedmetadata=function(){video.play();loading.style.display='none';scanning=true;window.scannerActive=true;startButton.disabled=true;stopButton.disabled=false;scanQRCode();};
    }).catch(error=>{loading.style.display='none';showError("Camera error: "+error.message);});
  }
  function stopScanner(){scanning=false;window.scannerActive=false;startButton.disabled=false;stopButton.disabled=true;if(stream){stream.getTracks().forEach(track=>track.stop());video.srcObject=null;}}
  function scanQRCode(){
    if(!scanning)return;
    const canvas=document.createElement('canvas');const ctx=canvas.getContext('2d');
    canvas.width=video.videoWidth;canvas.height=video.videoHeight;
    ctx.drawImage(video,0,0,canvas.width,canvas.height);
    const imageData=ctx.getImageData(0,0,canvas.width,canvas.height);
    const code=jsQR(imageData.data,canvas.width,canvas.height,{inversionAttempts:"dontInvert"});
    if(code&&code.data!==lastResult){showResult(code.data);}
    requestAnimationFrame(scanQRCode);
  }
  function handleFile(file){
    if(!file.type.startsWith("image/")){showError("Not an image.");return;}
    const reader=new FileReader();
    reader.onload=()=>{const img=new Image();img.onload=()=>{
      const canvas=document.createElement('canvas');const ctx=canvas.getContext('2d');
      canvas.width=img.width;canvas.height=img.height;ctx.drawImage(img,0,0,canvas.width,canvas.height);
      const imageData=ctx.getImageData(0,0,canvas.width,canvas.height);
      const code=jsQR(imageData.data,canvas.width,canvas.height,{inversionAttempts:"dontInvert"});
      if(code)showResult(code.data);else showError("No QR code found in image.");
    };img.src=reader.result;};reader.readAsDataURL(file);
  }
  function showResult(text){
    lastResult=text;resultPlaceholder.style.display='none';resultDiv.style.display='block';resultData.textContent=text;errorMessage.style.display='none';
    copyButton.disabled=false;
    try{new URL(text);openButton.disabled=false;}catch{openButton.disabled=true;}
  }
  function showError(message){errorMessage.textContent=message;errorMessage.style.display='block';}
  function generateQRCode(){
    const text=qrContent.value.trim();if(!text){alert("Enter text/URL first");return;}
    qrcodeDiv.innerHTML="";
    QRCode.toDataURL(text,{width:200,margin:2},function(err,url){
      if(err){alert("QR code generation failed");return;}
      const img=document.createElement('img');img.src=url;img.alt="Generated QR code";img.style.maxWidth="100%";qrcodeDiv.appendChild(img);qrCode=url;downloadButton.disabled=false;
    });
  }
});
</script>
</body>
</html>
